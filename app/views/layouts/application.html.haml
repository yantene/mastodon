!!! 5
%html{ lang: I18n.locale }
  %head
    %meta{ charset: 'utf-8' }/
    %meta{ name: 'viewport', content: 'width=device-width, initial-scale=1' }/
    %meta{ 'http-equiv' => 'X-UA-Compatible', content: 'IE=edge' }/
    %link{ rel: 'icon', href: favicon_path, type: 'image/x-icon' }/
    %link{ rel: 'apple-touch-icon', sizes: '180x180', href: '/apple-touch-icon.png' }/
    %link{ rel: 'mask-icon', href: '/mask-icon.svg', color: '#2B90D9' }/
    %link{ rel: 'manifest', href: '/manifest.json' }/
    %link{ rel: 'stylesheet', type: 'text/css', href: '//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha1/katex.min.css' }/
    %link{ rel: 'stylesheet', type: 'text/css', href: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/hybrid.min.css' }/
    %meta{ name: 'msapplication-config', content: '/browserconfig.xml' }/
    %meta{ name: 'theme-color', content: '#282c37' }/
    %meta{ name: 'apple-mobile-web-app-capable', content: 'yes' }/
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0-alpha1/katex.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/d.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/julia.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/lisp.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/ocaml.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/r.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/rust.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js' }
    %script{ src: '//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/tex.min.js' }

    %title<
      - if content_for?(:page_title)
        = yield(:page_title)
        = ' - '
      = title

    = stylesheet_pack_tag 'common', media: 'all'
    = stylesheet_pack_tag current_theme, media: 'all'
    = javascript_pack_tag 'common', integrity: true, crossorigin: 'anonymous'
    = javascript_pack_tag "locale_#{I18n.locale}", integrity: true, crossorigin: 'anonymous'
    = csrf_meta_tags

    = yield :header_tags

  - body_classes ||= @body_classes || ''
  - body_classes += ' reduce-motion' if current_account&.user&.setting_reduce_motion
  - body_classes += ' system-font' if current_account&.user&.setting_system_font_ui

  %body{ class: add_rtl_body_class(body_classes) }
    = content_for?(:content) ? yield(:content) : yield
